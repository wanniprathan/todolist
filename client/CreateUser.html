<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />    
    <title>Create user</title>    
    <script src="superfetch.js"></script>
     <link rel="stylesheet" href="style.css">
</head>

<body>

        
        <br>
        <br>
        <br>
        <br>
        <input id="inpname" type="text" placeholder="User name" />
        <input id="inpass" type="text" placeholder="password" />
        <input id="inpfullname" type="text" placeholder="full name" />
    <br>
        <button id="btnCreate">Create</button>
        <p class="message">I have an account: <a href="#">logg inn</a></p>
    
        <h2 id="txtinfo"></h2>
      
       
    
    
 
    
</body>
<script>
    
    var inpname = document.getElementById("inpname");
    var inpass = document.getElementById("inpass");
    var inpfullname = document.getElementById("inpfullname");        
    var btnCreate = document.getElementById("btnCreate"); 
    var txtinfo = document.getElementById("txtinfo"); 
    
    
    
    btnCreate.onclick = function() { 
        
        
        var upload = JSON.stringify({            
            loginname: inpname.value,
            password: inpass.value,
            fullname: inpfullname.value            
        });       
        
        var url = "http://localhost:3001/postuser/";

        var cfg = {
            method: "POST",            
            body: upload
        }    

      superfetch(url, "json", succ, error, cfg);
    }
         
        
  
    
    function succ(data) {
        console.log(data);
        
        if(data.msg == "Ugyldig brukernavn!!"){
            //alert("Brukeren finnes fra før");
            txtinfo.innerHTML = "Brukeren finnes fra før!";
        }
        else{
        
        txtinfo.innerHTML = "Brukeren, " + data.loginname + ", er oppretted. Fullt navn " + data.fullname;
        
        }
        /*for (var i = 0; i<data.length; i++){
            var div = document.createElement("div");
            
            div.innerHTML += "<h3>ID: " + data[i].id + "</h3>";
            div.innerHTML += "<h3>User: " + data[i].user_name + "</h3>";
            
            var hr = document.createElement("hr");
            document.body.appendChild(div);
            document.body.appendChild(hr);
        }*/
    }
    
    function error(err) {
        console.log(err);
    }

      


</script>

</html>